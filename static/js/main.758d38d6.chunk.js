(this.webpackJsonpreactdragdropdesign=this.webpackJsonpreactdragdropdesign||[]).push([[0],{19:function(e,t,n){e.exports=n(25)},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),c=n.n(o),l=n(1),s=n(8),i=Object(a.createContext)();function u(e){var t=e.children,n=Object(a.useState)(),o=Object(l.a)(n,2),c=o[0],s=o[1],u=Object(a.useMemo)((function(){return{dropped:c,setDropped:s}}),[c,s]);return r.a.createElement(i.Provider,{value:u},t)}function g(e,t){var n=Object(a.useState)((function(){return function(e,t){var n=JSON.parse(localStorage.getItem(e));return n||(t instanceof Function?t():t)}(e,t)})),r=Object(l.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,c]}function d(e){var t=e.id,n=e.path,o=g("dropped",""),c=Object(l.a)(o,2),u=(c[0],c[1]),d=Object(a.useContext)(i).setDropped,p=Object(a.useState)(0),m=Object(l.a)(p,2),f=(m[0],m[1],Object(a.useRef)(null)),D=Object(a.useRef)(null);return r.a.createElement("div",{className:"dragHome",ref:f},r.a.createElement(s.a.div,{drag:!0,layout:!0,className:"draggable",ref:D,dragMomentum:!1,onDragStart:function(e,t){if(D.current.parentElement===f.current){var n=D.current,a=n.getBoundingClientRect(),r=a.left+window.scrollX,o=a.top+window.scrollY;n.style.top=o+"px",n.style.left=r+"px",document.body.append(n)}},onDragEnd:function(e,a){var r=D.current,o=r.getBoundingClientRect();r.style.top="0px",r.style.left="0px",r.style.transform="translate3d(0px, 0px, 0px) scale(1, 1)",f.current.append(r);var c=document.querySelector(".designCanvas").getBoundingClientRect(),l=o.top+window.scrollY-(c.top+window.scrollY),s=o.left+window.scrollX-(c.left+window.scrollX),i={id:Date.now(),imageId:t,path:n,frame:[s,l,1,0]};u(i),d(i)}},r.a.createElement("img",{style:{pointerEvents:"none"},"data-id":t,src:n,alt:n})))}var p=["DD_01.png","DD_02.png","DD_03.png","DD_04.png","DD_05.png","DD_06.png","DD_07.png","DD_08.png","DD_09.png","DD_10.png","DD_11.png","DD_12.png","DD_13.png","DD_14.png","DD_15.png","DD_16.png","DD_17.png","DD_18.png","DD_19.png","DD_20.png","DD_21.png","DD_22.png","DD_23.png","DD_24.png","DD_25.png","DD_26.png"],m=function(){return p.map((function(e,t){return{id:t,path:"/ReactDragDropDesign/designImages/"+e}}))};function f(){var e=m();return r.a.createElement("div",{className:"designToolbox"},e.map((function(e){return r.a.createElement(d,{key:"DE_"+e.id,id:e.id,path:e.path})})))}var D=n(9),b=n(7),v=r.a.memo((function(e){var t=e.id,n=e.path,a=e.frame,o=e.set;return r.a.createElement("div",{className:"draggable editable",onClick:function(e){o(e.target),e.target.parentNode.append(e.target)},style:{transform:"translate(".concat(a[0],"px, ").concat(a[1],"px) scale(").concat(a[2],", ").concat(a[2],") rotate(").concat(a[3],"deg)")},"data-frame":a},r.a.createElement("img",{style:{pointerEvent:"none"},src:n,alt:t}))}));function E(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),s=Object(l.a)(c,2),u=s[0],g=s[1],d=Object(a.useState)(),p=Object(l.a)(d,2),m=p[0],f=p[1],E=Object(a.useContext)(i).dropped,_=n.map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,path:e.path,frame:e.frame,set:g})}));Object(a.useEffect)((function(){E&&o((function(e){return[].concat(Object(D.a)(e),[E])}))}),[E]);var h=function(e,t){var n=e.target.dataset.frame.split(",").map((function(e){return parseFloat(e)})),a={translate:[n[0],n[1]],scale:[n[2],n[2]],rotate:n[3]};f(a),console.log(a,t),"drag"===t&&e.set(a.translate),"rotate"===t&&e.set(a.rotate),"scale"===t&&e.set(a.scale),e.dragStart&&e.dragStart.set(a.translate),e.target.parentNode.append(e.target),console.log(m)},w=function(e){f({translate:e.beforeTranslate?e.beforeTranslate:m.translate,scale:e.scale?e.scale:m.scale,rotate:e.beforeRotate?e.beforeRotate:m.rotate}),e.target.style.transform="translate(".concat(m.translate[0],"px, ").concat(m.translate[1],"px)")+" scale(".concat(m.scale[0],", ").concat(m.scale[1],")")+" rotate(".concat(m.rotate,"deg)")},O=function(e){e.target.setAttribute("data-frame","".concat(m.translate[0],",").concat(m.translate[1],",").concat(m.scale[0],",").concat(m.rotate))};return console.count("stage"),r.a.createElement("div",{className:"designCanvas"},r.a.createElement(b.a,{target:u,renderDirections:["nw","ne","w","e","sw","s","se"],edge:!1,zoom:1,origin:!1,padding:{left:0,top:0,right:0,bottom:0},draggable:!0,throttleDrag:0,onDragStart:function(e){return h(e,"drag")},onDrag:w,onDragEnd:O,scalable:!0,keepRatio:!0,throttleScale:0,onScaleStart:function(e){return h(e,"scale")},onScale:w,onScaleEnd:O,rotatable:!0,rotationPosition:"top",onRotateStart:function(e){return h(e,"rotate")},onRotate:w,onRotateEnd:O,pinchable:!0}),_)}var _=n(6);function h(){return r.a.createElement("button",{onClick:function(){var e=document.getElementsByClassName("designCanvas");console.log(e),new _.a({unit:"px",format:[500,500]}).html(e[0],{callback:function(e){return e.save()},html2canvas:{background:"undefined"}}),console.log("click")}},"Make PDF")}function w(){return r.a.createElement("section",{className:"DesignSection"},r.a.createElement(u,null,r.a.createElement(E,null),r.a.createElement(f,null),r.a.createElement("div",{className:"buttonHolder"},r.a.createElement(h,null))))}n(24);var O=function(){return r.a.createElement(w,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,3]]]);
//# sourceMappingURL=main.758d38d6.chunk.js.map